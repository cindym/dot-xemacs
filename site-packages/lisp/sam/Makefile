all:	autoloads byte-compile

byte-compile:
	@echo ".el.elc:" > elmake
	@echo "	xemacs -batch -q -f batch-byte-compile \$$(@:.elc=.el)" >> elmake
	@echo " " >> elmake
	@echo "all: \\" >> elmake
	@ls [a-z]*.el | fgrep -v _pkg.el | \
		sed -e 's/^/	/' -e 's/el$$/elc\\/' >>elmake
	@gmake -f elmake
	@rm elmake

autoloads:
	@rm -f autoloads.el
	@xemacs -batch -q -no-site-file -l autoload -f batch-update-directory .

tags:
	etags *.el

clean:
	rm -f *.elc auto-autoloads.el TAGS
